---
import Card from "../components/dynamic/Card.astro";
import Pagination from "../components/dynamic/Pagination.astro";
import Carousel from "../layouts/Carousel.astro";
import Layout from "../layouts/Layout.astro"
import type {Anime} from "../type";

const page:number = parseInt(new URL(Astro.request.url).searchParams.get("page") ?? "1") || 1;
const response = await fetch(`https://samehadaku-api-man.vercel.app?page=${page}`,{
	method:"get"
});
const animes:Anime[] = await response.json();
---

<Layout title="Nonton Anime terbaik dengan gratis" >

    <Carousel />

    <h1 class="fs-3" >Episode Terbaru</h1>

	<div class="row mt-3">
		{animes.map((anime) => {
			return <div class="col-12 col-md-3 my-1 mb-3">
                <Card title={anime.title} image={anime.image} />
			</div>
		})}
	</div>
	
    <div class="d-flex justify-content-end mt-3" data-bs-theme="">
        <Pagination page={page} />
    </div>
	
</Layout>